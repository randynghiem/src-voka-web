{"version":3,"sources":["components/youtube-search-input/search-input.js","components/youtube-search-listing/decoded-entity.js","components/youtube-search-listing/search-listing.js","utils/dom.js","utils/url.js","services/youtube-search-api/index.js","event-handlers/dictation-search.js","views/dictation/index.js","event-handlers/goal.js","utils/list.js","event-handlers/dictation-view.js","utils/google-auth.js","utils/local-storage.js","event-handlers/auth.js","event-handlers/index.js","components/goal-input/index.js","components/goal-listing/goal-list-item.js","components/goal-listing/goal-list.js","components/goal-listing/goal-filter.js","views/goal/index.js","components/youtube-player/youtube-loader.js","components/youtube-player/youtube-player.js","components/command-bot/index.js","views/dictation/dictation-player.js","components/youtube-caption/index.js","views/dictation/dictation-caption.js","views/dictation/dictation-view.js","components/app-navbar/index.js","views/shared/app-header.js","components/dashboard-card/index.js","views/dashboard/index.js","components/set-card/index.js","views/voice/index.js","services/voka-api/index.js","utils/speech.js","views/voice/voice-play.js","views/login/index.js","views/shared/protected-route.js","index.js"],"names":["query","onClick","queryRef","useRef","React","useEffect","current","value","onSubmit","event","preventDefault","className","ref","type","name","id","placeholder","children","createElement","dangerouslySetInnerHTML","__html","videos","onFiniteScroll","document","addEventListener","_","debounce","docEl","documentElement","bodyEl","body","viewHeight","clientHeight","currentScroll","window","pageYOffset","Math","max","scrollHeight","offsetHeight","distanceToBottom","map","v","key","etag","to","videoId","src","snippet","thumbnails","default","url","alt","title","convertToUrl","link","params","Object","keys","join","ROOT_URL","YoutubeSearch","options","Promise","resolve","reject","q","part","Error","fetch","then","response","json","catch","API_KEY","process","CLEANUP","DEFAULT_STATE","isLoading","hasError","nextPageToken","loadingQueryData","loadedQueryData","data","appendQueryData","init","DictationApp","this","props","cleanup","triggerQuery","Fragment","Component","connect","DictationSearch","newQuery","dispatch","getState","relevanceLanguage","maxResults","err","console","log","pageToken","TOGGLE_GOAL","ADD_GOAL","FILTER_GOAL","FilterType","SHOW_ALL","SHOW_ACTIVE","SHOW_DONE","goals","filter","goalCount","formatStartTime","start","secondTotal","floor","seconds","minutes","slice","markLines","lines","cur","line","LOAD_CAPTION","JUMP_TO_LINE","CHANGE_TO_LINE","markers","playAt","curStart","command","getGoogleAuth","gapi","load","auth2","client_id","cookiepolicy","authIns","KEY","AUTHENTICATING_WITH_GOOGLE","SIGNED_IN_WITH_GOOGLE","SIGNED_OUT_WITH_GOOGLE","provider","ready","isAuthenticated","uid","email","signInOrOut","Auth","authenticatingWithGoogle","signOut","result","signedOutWithGoogle","signIn","user","profile","getBasicProfile","getId","getName","getEmail","signedInWithGoogle","payload","cached","state","obj","cache","localStorage","storedValue","JSON","stringify","setItem","setCache","initializeStore","all","InitializeAuth","initializeGoal","InitializeDictationSearch","InitializeDictationView","values","initialState","GoalState","DictationView","cachedAuth","getItem","parse","getCache","combineReducers","action","goal","done","text","items","i","formattedStart","Date","getTime","goalInput","e","val","trim","doneLabel","toggleGoal","onFilter","active","Goal","addGoal","filterGoal","filterGoals","yt","YT","loadScript","YouTubePlayer","YTEvents","intervalMarker","findLastMarker","curTime","nextTime","total","length","nextStart","onPlayerStateChange","onCued","onBuffering","onPause","onPlaying","onEnd","pingInterval","onSpeechChange","State","PlayerState","PLAYING","setInterval","currentTime","target","getCurrentTime","marker","clearInterval","CUED","BUFFERING","PAUSED","ENDED","getInitialOptions","video","width","height","playerVars","autoplay","cc_load_policy","showCaptions","controls","disablekb","disableKeyboard","fs","allowFullscreen","hl","lang","iv_load_policy","annotations","startSeconds","end","endSeconds","modestbranding","modestBranding","playsinline","playsInline","rel","showRelatedVideos","showinfo","showInfo","events","onReady","onPlayerReady","onStateChange","updateProps","propNames","player","forEach","mute","unMute","setPlaybackQuality","setVolume","getPlayerState","pauseVideo","playVideo","getIframe","opts","loadVideoById","cueVideoById","stopVideo","pos","parseFloat","split","seekTo","createPlayer","volume","resolvePlayer","Player","container","playerInstance","handler","muted","suggestedQuality","playbackRate","setPlaybackRate","prevProps","changes","destroy","el","defaultProps","commands","onCommand","annyang","cmdObject","cmd","addCommands","abort","ownProps","jumpToLine","dispatchCommand","onLineClick","curLine","querySelector","scrollIntoView","behavior","block","li","data-start","currentTarget","dataset","changeToLine","loadCaption","axios","match","vid","data-target","data-toggle","role","AppHeader","icon","Dashboard","sections","sc","SetCard","card","sec","Voice","sets","level","get","setState","s","voicePromise","speechSynthesis","onvoiceschanged","gVoices","getVoices","speakText","rate","voice","u","SpeechSynthesisUtterance","speak","VoicePlay","sentences","curText","showHint","playing","typedList","matched","onPlay","onEnter","onNext","nextLine","correctText","normalizedCurrentText","replace","normalizedCorrectText","toLowerCase","onShowHint","handleTyping","list","section","parts","concat","htmlFor","onChange","Login","from","location","pathname","component","rest","render","middlewares","thunk","preloadedState","store","createStore","reducers","applyMiddleware","ReactDOM","basename","exact","path","getElementById"],"mappings":"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","file":"static/js/main.a42fc975.chunk.js","sourcesContent":["import React, { useRef } from \"react\";\n\n/**\n * Custom search input component\n * @param {object} props React props with custom onClick event\n */\nexport default function({ query, onClick }) {\n  const queryRef = useRef(null);\n\n  React.useEffect(() => {\n    if (queryRef) {\n      queryRef.current.value = query;\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const handleClick = event => {\n    event.preventDefault();\n    queryRef.current.value && onClick && onClick(queryRef.current.value);\n  };\n\n  return (\n    <form onSubmit={handleClick}>\n      <div className=\"form-row mt-3 mb-3\">\n        <div className=\"col-8\">\n          <input\n            ref={queryRef}\n            type=\"text\"\n            name=\"queryBox\"\n            id=\"queryBox\"\n            className=\"form-control\"\n            placeholder=\"Search Youtube\"\n          />\n        </div>\n        <div className=\"col-4\">\n          <button type=\"submit\" className=\"btn btn-secondary pl-4 pr-4\">\n            <i className=\"fas fa-search fa-lg\"></i>\n          </button>\n        </div>\n      </div>\n    </form>\n  );\n}\n","import React from 'react';\n\nexport default function ({ children }) {\n  return React.createElement(\"div\", { dangerouslySetInnerHTML: { __html: children } });\n}","import './search-listing.css';\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport DecodedEntity from './decoded-entity';\nimport { distanceToBottom } from '../../utils/dom';\nimport _ from 'lodash';\n\nexport default function ({ videos, onFiniteScroll }) {\n\n  React.useEffect(() => {\n    // purely to emit events when hitting the bootom of the page\n    document.addEventListener('scroll', _.debounce(() => {\n      // check if the page is scrolled to the bottom\n      if (distanceToBottom() < 50) {\n        onFiniteScroll();\n      }\n    }, 100));\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return (\n    videos && <ul className=\"list-group list-group-flush col-md-8 mb-3\">\n      {videos.map(v => (\n        <li className=\"list-group-item app-yt-item\" key={v.etag}>\n          <div className=\"video-list media\">\n            <div className=\"media-left mr-4\">\n              <Link to={`/dictation/${v.id.videoId}`}>\n                <img\n                  src={v.snippet.thumbnails.default.url}\n                  alt=\"\"\n                  className=\"media-object\"\n                />\n              </Link>\n            </div>\n            <div className=\"media-body\">\n              <div className=\"media-heading\">\n                <Link to={`/dictation/${v.id.videoId}`}>\n                  <DecodedEntity>{v.snippet.title}</DecodedEntity>\n                </Link>\n              </div>\n            </div>\n          </div>\n        </li>\n      ))}\n    </ul>\n  );\n}","/**\n * Calculate the distance to bottom of current window view\n */\nexport const distanceToBottom = () => {\n  const docEl = document.documentElement;\n  const bodyEl = document.body;\n  const viewHeight = docEl.clientHeight;\n  const currentScroll = window.pageYOffset;\n  const scrollHeight = Math.max(\n    bodyEl.scrollHeight, docEl.scrollHeight,\n    bodyEl.offsetHeight, docEl.offsetHeight,\n    bodyEl.clientHeight, docEl.clientHeight\n  );\n  return scrollHeight - currentScroll - viewHeight;\n};","/**\n * return a full URL from its root link and params object\n * @param {*} link root link\n * @param {*} params URL params to be converted\n */\nexport const convertToUrl = (link, params) => {\n  var queryString = Object.keys(params).map(key => key + '=' + params[key]).join('&');\n  return link + '?' + queryString;\n}\n\n/**\n * to extract value of named parameter from a given link\n * @param {*} link Link to be extracted\n * @param {*} name name of the parameter\n */\nexport function getUrlParameter(link, name) {\n  name = name.replace(/[[]/, '\\\\[').replace(/[\\]]/, '\\\\]');\n  var regex = new RegExp('[\\\\?&]' + name + '=([^&#]*)');\n  var results = regex.exec(link);\n  return results === null ? null : decodeURIComponent(results[1].replace(/\\+/g, ' '));\n};","/**\n * More details about API search\n * https://developers.google.com/youtube/v3/docs/search/list#parameters\n */\nimport fetch from 'isomorphic-unfetch';\nimport { convertToUrl } from '../../utils/url';\n\nexport const ROOT_URL = 'https://www.googleapis.com/youtube/v3/search';\n\nexport const YoutubeSearch = (options = {}) => new Promise((resolve, reject) => {\n  if (!options.key || !options.q || !options.part || !options.type) {\n    reject(new Error('Please make sure that the required fields are inserted'));\n  }\n\n  const link = convertToUrl(ROOT_URL, options);\n\n  fetch(link)\n    .then((response) => resolve(response.json()))\n    .catch(reject);\n});\n\nexport default YoutubeSearch;","import YoutubeSearch from \"../services/youtube-search-api\";\n\n/**\n * Actions and default state\n */\nconst API_KEY = process.env.REACT_APP_YOUTUBE_SEARCH_KEY;\nconst LOADING_QUERY_DATA = \"search/LOADING_QUERY_DATA\";\nconst LOADED_QUERY_DATA = \"search/LOADED_QUERY_DATA\";\nconst APPEND_QUERY_DATA = \"search/APPEND_QUERY_DATA\";\nconst CLEANUP = \"dictation/search/CLEANUP\";\nconst DEFAULT_STATE = {\n  query: null,\n  isLoading: false,\n  hasError: false,\n  nextPageToken: null,\n  videos: []\n};\n\n/**\n * pass a function to Redux thunk for further processing\n */\nexport const triggerQuery = newQuery => {\n  return (dispatch, getState) => {\n    const { DictationSearch } = getState();\n\n    if (DictationSearch.isLoading) return;\n\n    // perform a search\n    if (newQuery) {\n      dispatch(loadingQueryData(newQuery));\n\n      YoutubeSearch({\n        key: API_KEY,\n        q: newQuery,\n        part: \"snippet\",\n        type: \"video\",\n        relevanceLanguage: \"de\",\n        maxResults: 10\n      })\n        .then(data => {\n          dispatch(loadedQueryData(data));\n        })\n        .catch(err => {\n          console.log(\"Error: \", err);\n        });\n    } else {\n      dispatch(loadingQueryData(DictationSearch.query));\n\n      YoutubeSearch({\n        key: API_KEY,\n        q: DictationSearch.query,\n        part: \"snippet\",\n        type: \"video\",\n        relevanceLanguage: \"de\",\n        maxResults: 10,\n        pageToken: DictationSearch.nextPageToken\n      })\n        .then(data => {\n          dispatch(appendQueryData(data));\n        })\n        .catch(err => {\n          console.log(\"Error: \", err);\n        });\n    }\n  };\n};\n\nexport const loadingQueryData = query => ({ type: LOADING_QUERY_DATA, query });\nexport const loadedQueryData = data => ({ type: LOADED_QUERY_DATA, data });\nexport const appendQueryData = data => ({ type: APPEND_QUERY_DATA, data });\nexport const cleanup = () => ({ type: CLEANUP });\n\n/**\n * Get the initial state of Dictation Search component\n * @returns A promise with the default state\n */\nexport const init = new Promise((resolve, reject) => {\n  resolve(DEFAULT_STATE);\n});\n\n/**\n * reducer for dictation view\n */\nexport default function (state = DEFAULT_STATE, action = {}) {\n  switch (action.type) {\n    case LOADING_QUERY_DATA:\n      return {\n        ...state,\n        query: action.query,\n        isLoading: true\n      };\n    case LOADED_QUERY_DATA:\n      return {\n        ...state,\n        videos: action.data.items,\n        nextPageToken: action.data.nextPageToken,\n        isLoading: false\n      };\n    case APPEND_QUERY_DATA:\n      return {\n        ...state,\n        videos: [...state.videos, ...action.data.items],\n        nextPageToken: action.data.nextPageToken,\n        isLoading: false\n      };\n    case CLEANUP:\n      return DEFAULT_STATE;\n    default:\n      return state;\n  }\n}\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport SearchInput from \"../../components/youtube-search-input/search-input\";\nimport SearchListing from \"../../components/youtube-search-listing/search-listing\";\nimport { triggerQuery, cleanup } from \"../../event-handlers/dictation-search\";\nimport PropTypes from 'prop-types';\n\nclass DictationApp extends React.Component {\n  componentWillUnmount() {\n    this.props.cleanup();\n  }\n\n  render() {\n    const { query, videos, triggerQuery } = this.props;\n    return (\n      <React.Fragment>\n        <SearchInput onClick={triggerQuery} query={query} />\n        <SearchListing videos={videos} onFiniteScroll={triggerQuery} />\n      </React.Fragment>\n    );\n  }\n}\n\nDictationApp.propTypes = {\n  query: PropTypes.string,\n  videos: PropTypes.array,\n  triggerQuery: PropTypes.func,\n  cleanup: PropTypes.func\n};\n\nexport default connect(\n  ({ DictationSearch }) => ({\n    query: DictationSearch.query,\n    videos: DictationSearch.videos\n  }),\n  { triggerQuery, cleanup }\n)(DictationApp);\n","/**\n * actions\n */\nconst TOGGLE_GOAL = \"goals/TOGGLE_GOAL\";\nconst ADD_GOAL = \"goals/ADD_GOAL\";\nconst FILTER_GOAL = \"goals/FILTER_GOAL\";\nconst CLEANUP = \"goals/CLEANUP\";\nexport const FilterType = {\n  SHOW_ALL: \"SHOW_ALL\",\n  SHOW_ACTIVE: \"SHOW_ACTIVE\",\n  SHOW_DONE: \"SHOW_DONE\"\n};\nconst DEFAULT_STATE = {\n  goals: [],\n  filter: FilterType.SHOW_ALL\n};\n\nlet goalCount = 0;\n\n/**\n * action creator\n */\nexport const toggleGoal = id => ({ type: TOGGLE_GOAL, id });\nexport const addGoal = text => ({ type: ADD_GOAL, id: goalCount++, done: false, text });\nexport const filterGoal = filter => ({ type: FILTER_GOAL, filter });\nexport const cleanup = () => ({ type: CLEANUP });\n\n/**\n * Get the initial state of Goal component\n * @returns A promise with the default state\n */\nexport const init = new Promise((resolve, reject) => {\n  resolve(DEFAULT_STATE);\n});\n\n/**\n * reducer\n */\nexport default function reducer(state = DEFAULT_STATE, action = {}) {\n  switch (action.type) {\n    case TOGGLE_GOAL:\n      return {\n        ...state,\n        goals: state.goals.map(goal => (goal.id === action.id ? { ...goal, done: !goal.done } : goal))\n      };\n    case ADD_GOAL:\n      return {\n        ...state,\n        goals: [...state.goals, { id: action.id, done: false, text: action.text }]\n      };\n    case FILTER_GOAL:\n      return {\n        ...state,\n        filter: action.filter\n      };\n    case CLEANUP:\n      return DEFAULT_STATE;\n    default:\n      return state;\n  }\n}\n","export const formatStartTime = start => {\n  let secondTotal = Math.floor(start);\n  let seconds = secondTotal % 60;\n  let minutes = Math.floor(secondTotal / 60);\n  if (minutes < 10) {\n    return \"0\" + minutes + \":\" + (\"0\" + seconds).slice(-2);\n  } else {\n    return minutes + \":\" + (\"0\" + seconds).slice(-2);\n  }\n};\n\nexport const markLines = (lines, cur) => {\n  return lines.map(line => ({\n    ...line,\n    current: line.start === cur ? \"current\" : \"\"\n  }));\n};\n","import { formatStartTime, markLines } from \"../utils/list\";\n\n/**\n * Actions and default state\n */\nconst LOAD_CAPTION = \"dictation/view/LOAD_CAPTION\";\nconst JUMP_TO_LINE = \"dictation/view/JUMP_TO_LINE\";\nconst CHANGE_TO_LINE = \"dictation/view/CHANGE_TO_LINE\";\nconst DISPATCH_COMMAND = \"dictation/view/DISPATCH_COMMAND\";\nconst CLEANUP = \"dictation/view/CLEANUP\";\nconst DEFAULT_STATE = {\n  videoId: null,\n  lines: null,\n  markers: null,\n  playAt: null,\n  curStart: null,\n  command: null\n};\n\n/**\n * pass a function to Redux thunk for further processing\n */\nexport const loadCaption = ({ videoId, lines }) => ({ type: LOAD_CAPTION, videoId, lines });\nexport const jumpToLine = start => ({ type: JUMP_TO_LINE, start });\nexport const changeToLine = start => ({ type: CHANGE_TO_LINE, start });\nexport const dispatchCommand = command => ({ type: DISPATCH_COMMAND, command });\nexport const cleanup = () => ({ type: CLEANUP });\n\n/**\n * Get the initial state of Dictation View component\n * @returns A promise with the default state\n */\nexport const init = new Promise((resolve, reject) => {\n  resolve(DEFAULT_STATE);\n});\n\n/**\n * reducer for dictation view\n */\nexport default function (state = DEFAULT_STATE, action = {}) {\n  switch (action.type) {\n    case LOAD_CAPTION:\n      const lines = action.lines.map(i => ({\n        ...i,\n        formattedStart: formatStartTime(i.start)\n      }));\n      lines[0].current = \"current\";\n      return {\n        ...state,\n        videoId: action.videoId,\n        lines: lines,\n        markers: action.lines.map(i => i.start)\n      };\n    case JUMP_TO_LINE:\n      if (!state.lines) return;\n      return {\n        ...state,\n        curStart: action.start,\n        lines: markLines(state.lines, action.start)\n      };\n    case CHANGE_TO_LINE:\n      if (!state.lines) return;\n      return {\n        ...state,\n        playAt: action.start + \"|\" + new Date().getTime(),\n        curStart: action.start,\n        lines: markLines(state.lines, action.start)\n      };\n    case DISPATCH_COMMAND:\n      return {\n        ...state,\n        command: action.command + \"|\" + new Date().getTime()\n      };\n    case CLEANUP:\n      return DEFAULT_STATE;\n    default:\n      return state;\n  }\n}\n","/**\n * https://developers.google.com/identity/sign-in/web/reference\n */\n\n/**\n * Private method to initialize google auth instance\n * @returns Promise of Google Auth Instance\n */\nconst getGoogleAuth = new Promise((resolve, reject) => {\n  window.gapi.load(\"auth2\", function () {\n    window.gapi.auth2\n      .init({\n        client_id: process.env.REACT_APP_GOOGLE_CLIENT_API,\n        cookiepolicy: \"single_host_origin\"\n      })\n      .then(authIns => {\n        resolve(authIns);\n      })\n      .catch(err => reject(err));\n  });\n});\n\n/**\n * To check if the user signs in or not.\n * @returns A promise\n */\nexport const isSignedInGoogle = () => {\n  console.log(\"isSignedIn\");\n  return new Promise((resolve, reject) => {\n    getGoogleAuth\n      .then(authIns => {\n        if (authIns.isSignedIn.get()) {\n          const user = authIns.currentUser.get();\n          const profile = user.getBasicProfile();\n          resolve(true, {\n            uid: profile.getId(),\n            name: profile.getName(),\n            email: profile.getEmail()\n          });\n        } else {\n          resolve(false);\n        }\n      })\n      .catch(err => reject(err));\n  });\n};\n\n/**\n * To sign in with a google account\n * @returns GoogleUser if successful\n */\nexport const signInGoogle = () => {\n  console.log(\"signed in\");\n  return new Promise((resolve, reject) => {\n    getGoogleAuth\n      .then(authIns => {\n        authIns.signIn().then(user => {\n          const profile = user.getBasicProfile();\n          resolve({\n            uid: profile.getId(),\n            name: profile.getName(),\n            email: profile.getEmail()\n          });\n        });\n      })\n      .catch(err => reject(err));\n  });\n};\n\n/**\n * To sign out the current user\n * @returns true if successful\n */\nexport const signOutGoogle = () => {\n  console.log(\"sign out\");\n  return new Promise((resolve, reject) => {\n    getGoogleAuth\n      .then(authIns => {\n        authIns.signOut().then(() => {\n          resolve(true);\n        });\n      })\n      .catch(err => reject(err));\n  });\n};","const KEY = \"randy-nghiem-voka-web\";\n\n/**\n * Get cached object from local storage\n * @returns Stored object if existing, null otherwise.\n */\nexport const getCache = () => {\n  const cache = window.localStorage;\n  const storedValue = cache.getItem(KEY);\n  if (storedValue === null) return null;\n\n  const storedObject = JSON.parse(storedValue);\n  return storedObject;\n};\n\n/**\n * Cache an object into local storage\n * @param {object} obj - Object to be stored\n */\nexport const setCache = obj => {\n  const cache = window.localStorage;\n  const storedValue = JSON.stringify(obj);\n  cache.setItem(KEY, storedValue);\n};\n","import { signInGoogle, signOutGoogle } from \"../utils/google-auth\";\nimport { setCache } from \"../utils/local-storage\";\n/**\n * Action descriptions\n */\nconst AUTHENTICATING_WITH_GOOGLE = \"auth/AUTHENTICATING_WITH_GOOGLE\";\nconst SIGNED_IN_WITH_GOOGLE = \"auth/SIGNED_IN_WITH_GOOGLE\";\nconst SIGNED_OUT_WITH_GOOGLE = \"auth/SIGNED_OUT_WITH_GOOGLE\";\n\nconst DEFAULT_STATE = {\n  provider: null,\n  ready: true,\n  isAuthenticated: false,\n  uid: null,\n  name: null,\n  email: null\n};\n\n/**\n * Action creators\n */\nexport const signInOrOut = provider => {\n  return (dispatch, getState) => {\n    // check if the user is authenticated\n    const { Auth } = getState();\n\n    // if not ready, skip to avoid duplicated authentication\n    if (!Auth.ready) return;\n\n    dispatch(authenticatingWithGoogle());\n\n    if (provider === \"google\") {\n      if (Auth.isAuthenticated) {\n        signOutGoogle()\n          .then(result => {\n            dispatch(signedOutWithGoogle());\n          })\n          .catch(err => console.log(err));\n      } else {\n        signInGoogle()\n          .then(user => {\n            dispatch(signedInWithGoogle(user));\n          })\n          .catch(err => console.log(err));\n      }\n    }\n  };\n};\n\nexport const authenticatingWithGoogle = () => ({ type: AUTHENTICATING_WITH_GOOGLE });\nexport const signedInWithGoogle = payload => ({ type: SIGNED_IN_WITH_GOOGLE, payload });\nexport const signedOutWithGoogle = () => ({ type: SIGNED_OUT_WITH_GOOGLE });\n\n/**\n * Get intial state of Auth component\n * @returns A promise with the default state\n */\nexport const init = new Promise((resolve, reject) => {\n  resolve(DEFAULT_STATE);\n});\n\nconst cached = state => {\n  setCache({ Auth: state });\n  return state;\n};\n\n/**\n * Handle authentication\n */\nexport default function Auth(state = DEFAULT_STATE, action = {}) {\n  switch (action.type) {\n    case AUTHENTICATING_WITH_GOOGLE:\n      return cached({\n        ...state,\n        provider: \"google\",\n        ready: false\n      });\n    case SIGNED_IN_WITH_GOOGLE:\n      return cached({\n        ...state,\n        ready: true,\n        isAuthenticated: true,\n        ...action.payload\n      });\n    case SIGNED_OUT_WITH_GOOGLE:\n      return cached(DEFAULT_STATE);\n    default:\n      return state;\n  }\n}\n","import { combineReducers } from \"redux\";\nimport GoalState, { init as initializeGoal } from \"./goal\";\nimport DictationSearch, { init as InitializeDictationSearch } from \"./dictation-search\";\nimport DictationView, { init as InitializeDictationView } from \"./dictation-view\";\nimport Auth, { init as InitializeAuth } from \"./auth\";\nimport { getCache } from \"../utils/local-storage\";\n\nexport const initializeStore = new Promise((resolve, reject) => {\n  Promise.all([InitializeAuth, initializeGoal, InitializeDictationSearch, InitializeDictationView]).then(\n    values => {\n      const initialState = {\n        Auth: values[0],\n        GoalState: values[1],\n        DictationSearch: values[2],\n        DictationView: values[3]\n      };\n\n      const cachedAuth = getCache();\n      if (cachedAuth !== null) {\n        initialState.Auth = cachedAuth.Auth;\n      }\n\n      resolve(initialState);\n    }\n  );\n});\n\nexport default combineReducers({\n  Auth,\n  GoalState,\n  DictationSearch,\n  DictationView\n});\n","import React from 'react';\n\n/**\n * Custom goal input with custom style\n * @param {*} props props object with onClick event handler\n */\nexport default function ({ onClick }) {\n  const goalInput = React.useRef(null);\n\n  const handleAddTodo = (e) => {\n    e.preventDefault();\n    if(goalInput && goalInput.current.value){\n      const val = goalInput.current.value.trim();\n      onClick && onClick(val);\n      goalInput.current.value = '';\n    }\n  };\n\n  return (\n    <form onSubmit={handleAddTodo}>\n      <div className=\"form-row mb-3 mt-3\">\n        <div className=\"col-8\">\n          <input type=\"text\" className=\"form-control\" placeholder=\"Todo Item\" ref={goalInput} />\n        </div>\n        <div className=\"col-4\">\n          <button type=\"submit\" className=\"btn btn-secondary\">Add Item</button>\n        </div>\n      </div>\n    </form>\n  );\n};","import React from 'react';\n\nexport default function ({ text, done, onClick }) {\n  let doneLabel = done ? ' list-group-item-success' : '';\n\n  return (\n    <li className={\"list-group-item d-flex justify-content-between align-items-center\" + doneLabel}\n      onClick={onClick}>\n      {text}\n      <span className=\"badge badge-secondary badge-pill\">New</span>\n    </li>\n  );\n}","import React from 'react';\nimport GoalItem from './goal-list-item';\n\nexport default function ({ goals, toggleGoal }) {\n  return (\n    <ul className=\"list-group mb-3\">\n      {\n        goals != null &&\n        goals.map(goal => (\n          <GoalItem key={goal.id} {...goal} onClick={() => toggleGoal(goal.id)} />\n        ))\n      }\n    </ul>\n  );\n}","import React from 'react';\n\n/**\n * Custom filter component\n * @param {*} props React props\n */\nexport default function ({ FilterType, filter, onFilter }) {\n  let all = filter === FilterType.SHOW_ALL ? 'active' : '';\n  let active = filter === FilterType.SHOW_ACTIVE ? 'active' : '';\n  let done = filter === FilterType.SHOW_DONE ? 'active' : '';\n\n  return (\n    <div className=\"btn-group btn-group-toggle\">\n      <label className={'btn btn-outline-info ' + all}>\n        <input type=\"radio\" name=\"filters\" onClick={() => onFilter(FilterType.SHOW_ALL)} /> All\n      </label>\n      <label className={'btn btn-outline-info ' + active}>\n        <input type=\"radio\" name=\"filters\" onClick={() => onFilter(FilterType.SHOW_ACTIVE)} /> Active\n      </label>\n      <label className={'btn btn-outline-info ' + done}>\n        <input type=\"radio\" name=\"filters\" onClick={() => onFilter(FilterType.SHOW_DONE)} /> Done\n      </label>\n    </div>\n  );\n}","//compose different todo components\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport GoalInput from \"../../components/goal-input\";\nimport GoalList from \"../../components/goal-listing/goal-list\";\nimport GoalFilter from \"../../components/goal-listing/goal-filter\";\nimport { addGoal, toggleGoal, FilterType, filterGoal, cleanup } from \"../../event-handlers/goal\";\nimport PropTypes from 'prop-types';\n\nclass Goal extends React.Component {\n  componentWillUnmount() {\n    this.props.cleanup();\n  }\n\n  render() {\n    const { goals, filter, addGoal, toggleGoal, filterGoal } = this.props;\n    return (\n      <div className=\"row justify-content-md-center\">\n        <div className=\"col-md-10 col-lg-8\">\n          <GoalInput onClick={text => addGoal(text)} />\n          <GoalList goals={goals} toggleGoal={toggleGoal} />\n          <GoalFilter FilterType={FilterType} filter={filter} onFilter={filterGoal} />\n        </div>\n      </div>\n    );\n  }\n}\n\nGoal.propTypes = {\n  goals: PropTypes.array.isRequired,\n  filter: PropTypes.string,\n  addGoal: PropTypes.func,\n  toggleGoal: PropTypes.func,\n  filterGoal: PropTypes.func,\n  cleanup: PropTypes.func\n};\n\nconst filterGoals = (goals, filter) => {\n  switch (filter) {\n    case FilterType.SHOW_ACTIVE:\n      return goals.filter(goal => goal.done === false);\n    case FilterType.SHOW_DONE:\n      return goals.filter(goal => goal.done === true);\n    default:\n      return goals;\n  }\n};\n\nexport default connect(\n  ({ GoalState }) => ({\n    goals: filterGoals(GoalState.goals, GoalState.filter),\n    filter: GoalState.filter\n  }),\n  { addGoal, toggleGoal, filterGoal, cleanup }\n)(Goal);\n","import loadScript from \"load-script2\";\n\nlet yt = null;\nexport const init = () => {\n  if (!yt) {\n    yt = new Promise((resolve, reject) => {\n      if (typeof window.YT === \"object\" &&\n        typeof window.YT.ready === \"function\") {\n        window.YT.ready(() => {\n          resolve(window.YT);\n        });\n        return;\n      }\n      loadScript(\"https://www.youtube.com/iframe_api\").then(() => {\n        window.YT.ready(() => {\n          resolve(window.YT);\n        });\n      }, err => {\n        reject(err);\n      });\n    });\n  }\n  return yt;\n};\n","import React from \"react\";\nimport { init } from \"./youtube-loader\";\n\n/**\n * Event driven Youtube Player\n */\nclass YouTubePlayer extends React.Component {\n  YTEvents = [\n    \"onReady\",\n    \"onStateChange\",\n    \"onPlaybackQualityChange\",\n    \"onPlaybackRateChange\",\n    \"onError\"\n  ];\n\n  intervalMarker = null;\n\n  /**\n   * create when mounted\n   */\n  componentDidMount() {\n    this.createPlayer();\n  }\n\n  componentDidUpdate(prevProps) {\n    const changes = Object.keys(this.props).filter(\n      name => this.props[name] !== prevProps[name]\n    );\n    this.updateProps(changes);\n  }\n\n  componentWillUnmount() {\n    if (this.playerInstance) {\n      this.playerInstance.destroy();\n    }\n  }\n\n  findLastMarker = (markers, curTime, nextTime) => {\n    const total = markers.length;\n    for (let i = 1; i < total; i++) {\n      if (markers[i] > curTime && markers[i] <= nextTime) {\n        return {\n          curStart: markers[i - 1],\n          nextStart: markers[i]\n        };\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Youtube Player native event: onPlayerStateChange\n   */\n  onPlayerStateChange = event => {\n    const {\n      onCued,\n      onBuffering,\n      onPause,\n      onPlaying,\n      onEnd,\n      pingInterval,\n      markers,\n      onSpeechChange\n    } = this.props;\n\n    const State = window.YT.PlayerState;\n\n    //trigger event when speech changes\n    if (markers !== null && markers.length > 0) {\n      if (event.data === State.PLAYING) {\n        this.intervalMarker = setInterval(() => {\n          let currentTime = event.target.getCurrentTime();\n          const marker = this.findLastMarker(markers, currentTime, currentTime + pingInterval / 1000);\n\n          if (marker != null) {\n            onSpeechChange && onSpeechChange(marker.nextStart);\n          }\n        }, pingInterval);\n      } else {\n        clearInterval(this.intervalMarker);\n      }\n    }\n\n    switch (event.data) {\n      case State.CUED:\n        onCued(event);\n        break;\n      case State.BUFFERING:\n        onBuffering(event);\n        break;\n      case State.PAUSED:\n        onPause(event);\n        break;\n      case State.PLAYING:\n        onPlaying(event);\n        break;\n      case State.ENDED:\n        onEnd(event);\n        break;\n      default:\n    }\n  };\n\n  getInitialOptions = () => {\n    return {\n      videoId: this.props.video,\n      width: this.props.width,\n      height: this.props.height,\n      playerVars: {\n        autoplay: this.props.autoplay,\n        cc_load_policy: this.props.showCaptions ? 1 : 0,\n        controls: this.props.controls ? 1 : 0,\n        disablekb: this.props.disableKeyboard ? 1 : 0,\n        fs: this.props.allowFullscreen ? 1 : 0,\n        hl: this.props.lang,\n        iv_load_policy: this.props.annotations ? 1 : 3,\n        start: this.props.startSeconds,\n        end: this.props.endSeconds,\n        modestbranding: this.props.modestBranding ? 1 : 0,\n        playsinline: this.props.playsInline ? 1 : 0,\n        rel: this.props.showRelatedVideos ? 1 : 0,\n        showinfo: this.props.showInfo ? 1 : 0\n      },\n      events: {\n        onReady: this.onPlayerReady,\n        onStateChange: this.onPlayerStateChange\n      }\n    };\n  };\n\n  updateProps = propNames => {\n    this.player.then(player => {\n      propNames.forEach(name => {\n        const value = this.props[name];\n        switch (name) {\n          case \"muted\":\n            if (value) {\n              player.mute();\n            } else {\n              player.unMute();\n            }\n            break;\n          case \"suggestedQuality\":\n            player.setPlaybackQuality(value);\n            break;\n          case \"volume\":\n            player.setVolume(value * 100);\n            break;\n          case \"paused\":\n            if (value && player.getPlayerState() !== 2) {\n              player.pauseVideo();\n            } else if (!value && player.getPlayerState() === 2) {\n              player.playVideo();\n            }\n            break;\n          case \"id\":\n          case \"className\":\n          case \"width\":\n          case \"height\":\n            player.getIframe()[name] = value;\n            break;\n          case \"video\":\n            if (!value) {\n              player.stopVideo();\n            } else {\n              const { startSeconds, endSeconds, autoplay } = this.props;\n              const opts = {\n                videoId: value,\n                startSeconds: startSeconds || 0,\n                endSeconds\n              };\n              if (autoplay) {\n                player.loadVideoById(opts);\n              } else {\n                player.cueVideoById(opts);\n              }\n            }\n            break;\n          case \"playAt\":\n            if (value) {\n              const pos = parseFloat(value.split(\"|\")[0]);\n              player.seekTo(pos);\n            }\n            break;\n          case \"command\":\n            const actual = value.split(\"|\")[0];\n            switch (actual) {\n              case \"play\":\n                player.playVideo();\n                break;\n              case \"pause\":\n                player.pauseVideo();\n                break;\n              case \"reset\":\n                player.seekTo(0);\n                player.playVideo();\n                break;\n              case \"stop\":\n                player.stopVideo();\n                break;\n              default:\n            }\n            break;\n          default:\n        }\n      });\n    });\n  };\n\n  createPlayer = () => {\n    const { volume } = this.props;\n\n    // trigger first event: Player Loading\n    this.player = init().then(\n      YT =>\n        new Promise(resolve => {\n          // to resolve when the player is ready\n          this.resolvePlayer = resolve;\n\n          const player = new YT.Player(\n            this.container,\n            this.getInitialOptions()\n          );\n          this.playerInstance = player;\n\n          this.YTEvents.forEach(name => {\n            player.addEventListener(name, event => {\n              const handler = this.props[name];\n              if (handler) {\n                handler(event);\n              }\n            });\n          });\n        })\n    );\n\n    if (typeof volume === \"number\") {\n      this.updateProps([\"volume\"]);\n    }\n  };\n\n  /**\n   * Youtube Player native event: onPlayerReady\n   */\n  onPlayerReady = event => {\n    const { volume, muted, suggestedQuality, playbackRate } = this.props;\n\n    if (typeof volume !== \"undefined\") {\n      event.target.setVolume(volume * 100);\n    }\n    if (typeof muted !== \"undefined\") {\n      if (muted) {\n        event.target.mute();\n      } else {\n        event.target.unMute();\n      }\n    }\n    if (typeof suggestedQuality !== \"undefined\") {\n      event.target.setPlaybackQuality(suggestedQuality);\n    }\n    if (typeof playbackRate !== \"undefined\") {\n      event.target.setPlaybackRate(playbackRate);\n    }\n\n    // linked to 1st event (Player Loading), resolve to Youtube Player when it's ready\n    this.resolvePlayer(event.target);\n  };\n\n  render() {\n    const { id, className } = this.props;\n\n    return (\n      <div id={id} className={className} ref={el => (this.container = el)} />\n    );\n  }\n}\n\nYouTubePlayer.defaultProps = {\n  autoplay: false,\n  showCaptions: false,\n  controls: true,\n  disableKeyboard: false,\n  allowFullscreen: true,\n  annotations: true,\n  modestBranding: false,\n  playsInline: false,\n  showRelatedVideos: true,\n  showInfo: true,\n  pingInterval: 100,\n  playAt: null, //  7.591|1578150995863\n  onCued: () => { },\n  onBuffering: () => { },\n  onPlaying: () => { },\n  onPause: () => { },\n  onEnd: () => { },\n  onSpeechChange: null,\n  markers: null,\n  command: null\n};\n\nexport default YouTubePlayer;\n","import React from 'react';\nimport annyang from 'annyang';\n\nexport default function ({ commands, onCommand }) {\n\n  React.useEffect(() => {\n    if (annyang) {\n      // define commands\n      const cmdObject = {};\n      commands.forEach(cmd => cmdObject[cmd] = () => onCommand(cmd));\n      annyang.addCommands(cmdObject);\n\n      //start listening\n      annyang.start();\n\n      return () => {\n        annyang.abort();\n      };\n    }\n  });\n\n  return '';\n}","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport YouTubePlayer from \"../../components/youtube-player/youtube-player\";\nimport { jumpToLine, dispatchCommand } from \"../../event-handlers/dictation-view\";\nimport CommandBot from \"../../components/command-bot\";\nimport PropTypes from 'prop-types';\n\nconst DictationPlayer = ({ videoId, markers, playAt, command, jumpToLine, dispatchCommand }) => {\n  return (\n    <React.Fragment>\n      {markers && (\n        <YouTubePlayer\n          video={videoId}\n          markers={markers}\n          onSpeechChange={start => jumpToLine(start)}\n          playAt={playAt}\n          command={command}\n          width=\"720\"\n          height=\"405\"\n          autoplay=\"1\"\n        />\n      )}\n      <CommandBot\n        commands={[\"repeat\", \"again\", \"next\", \"reset\", \"stop\", \"play\", \"pause\"]}\n        onCommand={cmd => dispatchCommand(cmd)}\n      />\n    </React.Fragment>\n  );\n};\n\nDictationPlayer.propTypes = {\n  videoId: PropTypes.string.isRequired,\n  markers: PropTypes.array,\n  playAt: PropTypes.string,\n  command: PropTypes.string,\n  jumpToLine: PropTypes.func,\n  dispatchCommand: PropTypes.func\n};\n\nexport default connect(\n  ({ DictationView }, ownProps) => ({\n    videoId: ownProps.videoId,\n    markers: DictationView.markers,\n    playAt: DictationView.playAt,\n    command: DictationView.command\n  }),\n  { jumpToLine, dispatchCommand }\n)(DictationPlayer);\n","import React from 'react';\nimport './index.css';\n\nexport default function ({ lines, curStart, onLineClick }) {\n  React.useEffect(() => {\n    let curLine = document.querySelector('.caption-viewer .current');\n    if (curLine != null) {\n      curLine.scrollIntoView({ behavior: 'smooth', block: \"center\" });\n    }\n  }, [curStart]);\n\n  return (\n    lines &&\n    <ul className=\"list-group list-group-flush caption-viewer mt-3\">\n      {\n        lines.map(li => (\n          <li className={\"list-group-item caption-item \" + li.current}\n            key={li.start} data-start={li.start}\n            onClick={e => onLineClick(e.currentTarget.dataset.start)}>\n            <span className=\"caption-item-time\">{li.formattedStart}</span>\n            <span className=\"caption-item-text\">{li.text}</span>\n          </li>\n        ))\n      }\n    </ul>\n  );\n}","import React, { useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport axios from \"axios\";\nimport { changeToLine, loadCaption } from \"../../event-handlers/dictation-view\";\nimport YoutubeCaption from \"../../components/youtube-caption\";\nimport PropTypes from 'prop-types';\n\nconst DictationCaption = ({ videoId, lines, curStart, changeToLine, loadCaption }) => {\n  useEffect(() => {\n    axios(`https://voka.azurewebsites.net/api/v1/captions/${videoId}/de`).then(response =>\n      loadCaption({ videoId, lines: response.data })\n    );\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return <YoutubeCaption lines={lines} curStart={curStart} onLineClick={changeToLine} />;\n};\n\nDictationCaption.propTypes = {\n  lines: PropTypes.array,\n  curStart: PropTypes.number,\n  videoId: PropTypes.string,\n  changeToLine: PropTypes.func,\n  loadCaption: PropTypes.func\n}\n\nexport default connect(\n  ({ DictationView }, ownProps) => ({\n    lines: DictationView.lines,\n    curStart: DictationView.curStart,\n    videoId: ownProps.videoId\n  }),\n  { changeToLine, loadCaption }\n)(DictationCaption);\n","import React from \"react\";\nimport { connect } from 'react-redux';\nimport DictationPlayer from \"./dictation-player\";\nimport DictationCaption from \"./dictation-caption\";\nimport { cleanup } from '../../event-handlers/dictation-view';\nimport PropTypes from 'prop-types';\n\nclass DictationView extends React.Component {\n\n  componentWillUnmount() {\n    this.props.dispatch(cleanup());\n  }\n\n  render() {\n    const { match } = this.props;\n    const videoId = match.params.vid;\n\n    return (\n      <React.Fragment>\n        <div className=\"row\">\n          <div className=\"col-md-12 text-center\">\n            <DictationPlayer videoId={videoId} />\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"col-md-12\">\n            <DictationCaption videoId={videoId} />\n          </div>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nDictationView.propTypes = {\n  dispatch: PropTypes.func.isRequired\n};\n\nexport default connect()(DictationView);","import \"./index.css\";\nimport \"bootstrap/js/dist/collapse\";\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nexport default function ({ isAuthenticated, signInOrOut }) {\n  return (\n    <nav className=\"navbar navbar-dark bg-info navbar-expand-lg fixed-top portfolio-navbar gradient\">\n      <div className=\"container app-container\">\n        <Link to=\"/\" className=\"navbar-brand logo\">\n          Deutsch Lernen\n        </Link>\n        {isAuthenticated &&\n          <React.Fragment>\n            <button className=\"navbar-toggler\" data-target=\"#navbarNav\" data-toggle=\"collapse\">\n              <span className=\"sr-only\">Toggle navigation</span>\n              <span className=\"navbar-toggler-icon\"></span>\n            </button>\n            <div id=\"navbarNav\" className=\"collapse navbar-collapse\">\n              <ul className=\"nav navbar-nav ml-auto\">\n                <li className=\"nav-item\" role=\"presentation\">\n                  <Link to=\"/\" className=\"nav-link voka-nav-link active\">Dashboard</Link>\n                </li>\n                <li className=\"nav-item\" role=\"presentation\">\n                  <span className=\"nav-link active voka-nav-link\" onClick={signInOrOut}>\n                    Sign Out\n              </span>\n                </li>\n              </ul>\n            </div>\n          </React.Fragment>\n        }\n      </div>\n    </nav>\n  );\n}\n","import React from \"react\";\nimport AppNavBar from \"../../components/app-navbar\";\nimport { connect } from \"react-redux\";\nimport { signInOrOut } from \"../../event-handlers/auth\";\nimport PropTypes from 'prop-types';\n\nclass AppHeader extends React.Component {\n  signInOrOut = () => {\n    this.props.dispatch(signInOrOut(\"google\"));\n  };\n\n  render() {\n    const { isAuthenticated } = this.props;\n    return <AppNavBar isAuthenticated={isAuthenticated} signInOrOut={this.signInOrOut} />;\n  }\n}\n\nAppHeader.propTypes = {\n  isAuthenticated: PropTypes.bool,\n  dispatch: PropTypes.func.isRequired\n};\n\nexport default connect(\n  ({ Auth }) => ({\n    isAuthenticated: Auth.isAuthenticated\n  })\n)(AppHeader);\n","import './index.css';\nimport React from 'react';\nimport { Link } from 'react-router-dom';\n\nexport default function ({ to, title, text, icon }) {\n  return (\n    <div className=\"card shadow border-info py-2 dashboard-card mb-3\">\n      <div className=\"card-body\">\n        <div className=\"row align-items-center no-gutters\">\n          <div className=\"col mr-2\">\n            <Link className=\"font-weight-bold\" to={to}>{title}</Link>\n            <div>{text}</div>\n          </div>\n          <div className=\"col-auto\">\n            <i className={icon}></i>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n};","import React from \"react\";\nimport DashboardCard from \"../../components/dashboard-card\";\n\nclass Dashboard extends React.Component {\n  sections = [\n    {\n      to: \"/dictation\",\n      title: \"VIDEO DICTATION\",\n      text: \"Learning by watching Youtube in Deutsch and repeating along.\",\n      icon: \"fas fa-chalkboard-teacher fa-5x\"\n    },\n    {\n      to: \"/voice\",\n      title: \"LISTEN AND LEARN\",\n      text: \"Listen in German and write down what you hear.\",\n      icon: \"fas fa-microphone-alt fa-5x\"\n    },\n    {\n      to: \"/goal\",\n      title: \"GOAL SETTING\",\n      text: \"Setting goals and keep track of progress.\",\n      icon: \"fas fa-tasks fa-5x\"\n    }\n  ];\n\n  render() {\n    return (\n      <div className=\"row\">\n        {this.sections.map(sc => (\n          <div className=\"col-md-6\" key={sc.to}>\n            <DashboardCard\n              to={sc.to}\n              title={sc.title}\n              text={sc.text}\n              icon={sc.icon}\n            />\n          </div>\n        ))}\n      </div>\n    );\n  }\n}\n\nexport default Dashboard;","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Link } from \"react-router-dom\";\n\nconst SetCard = ({ card }) => {\n  return (\n    <div className=\"col-sm-6 mb-4\" key={card.id}>\n      <div className=\"card\">\n        <div className=\"card-body\">\n          <h5 className=\"card-title\">\n            <Link to={`/voice/${card.id}`}>{card.title}</Link>\n          </h5>\n          <div className=\"card-text\">\n            <ul className=\"list-group\">\n              {card.sections.map(sec => (\n                <li className=\"list-group-item border-0 p-0\" key={sec.title}>\n                  {sec.title}\n                </li>\n              ))}\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nSetCard.propTypes = {\n  card: PropTypes.object.isRequired\n};\n\nexport default SetCard;\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { getSets } from \"../../services/voka-api\";\nimport SetCard from '../../components/set-card';\n\n/**\n * Dashboard to explore available sets\n */\nclass Voice extends React.Component {\n  state = {\n    sets: null\n  };\n\n  componentDidMount() {\n    getSets(\"a1\").then(data => {\n      this.setState({ sets: data });\n    });\n  }\n\n  render() {\n    const { sets } = this.state;\n    return (\n      <form>\n        <div className=\"form-group\">\n          <div className=\"input-group\">\n            <input type=\"text\" className=\"form-control\" placeholder=\"Search for available sets\" />\n            <div className=\"input-group-append\">\n              <button className=\"btn btn-info\"> Search </button>\n            </div>\n          </div>\n        </div>\n        <h4>Popular Sets</h4>\n        <div className=\"row\">\n          {sets && sets.map(s => <SetCard card={s} />)}\n        </div>\n      </form>\n    );\n  }\n}\n\nexport default connect()(Voice);","import axios from \"axios\";\n/**\n * https://voka.azurewebsites.net/api/v1/sets/a1/1\n * @param {string} level current level of a set\n * @param {number} id identity of a set\n */\nexport const getSetById = (level, id) =>\n  new Promise((resolve, reject) => {\n    const url = `https://voka.azurewebsites.net/api/v1/sets/${level}/${id}`;\n    axios\n      .get(url)\n      .then(response => {\n        resolve(response.data);\n      })\n      .catch(err => {\n        reject(err);\n      });\n  });\n\nexport const getSets = level =>\n  new Promise((resolve, reject) => {\n    const url = `https://voka.azurewebsites.net/api/v1/sets/${level}`;\n    axios\n      .get(url)\n      .then(response => {\n        resolve(response.data);\n      })\n      .catch(err => {\n        reject(err);\n      });\n  });\n","// initialize promise\nconst voicePromise = new Promise((resolve, reject) => {\n  speechSynthesis.onvoiceschanged = function () {\n    const voices = speechSynthesis.getVoices();\n    const gVoices = voices.filter(v => v.name === \"Google Deutsch\");\n\n    if (gVoices.length === 1) {\n      resolve(gVoices[0]);\n    } else {\n      reject(null);\n    }\n  };\n});\n\nexport const speakText = (text, lang = 'de-DE', rate = 0.8) => {\n  text && voicePromise.then(voice => {\n    let u = new SpeechSynthesisUtterance();\n    u.voice = voice;\n    u.lang = lang;\n    u.text = text;\n    u.rate = rate;\n    window.speechSynthesis.speak(u);\n  });\n}\n","import './voice-play.css';\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { speakText } from \"../../utils/speech\";\nimport CommandBot from '../../components/command-bot';\nimport * as VokaApi from '../../services/voka-api';\n\nclass VoicePlay extends React.Component {\n  state = {\n    sentences: [],\n    curLine: 0,\n    curText: '',\n    showHint: false,\n    playing: false,\n    typedList: [],\n    matched: true\n  };\n\n  componentDidMount() {\n    //load the initial state\n    let list = [];\n    VokaApi.getSetById('a1', 1)\n      .then(data => {\n        data.sections.forEach(section => {\n          section.parts.forEach(part => {\n            list = list.concat(part.sentences);\n          });\n        });\n        this.setState({ sentences: list });\n      });\n  }\n\n  componentDidUpdate(prevProps) {\n    // handle changes of props\n    \n  }\n\n  onPlay = () => {\n    // play from first line\n    speakText(this.state.sentences[0]);\n    this.setState({ playing: true });\n  }\n\n  onEnter = (e) => {\n    e.preventDefault();\n    this.onNext('ok');\n  }\n\n  onNext = (cmd) => {\n    const { curLine, sentences, curText } = this.state,\n      nextLine = curLine + 1,\n      correctText = sentences[curLine];\n\n    if(cmd === 'again'){\n      speakText(sentences[curLine]);\n      return;\n    }\n\n    // check if the input text is correct\n    // if incorrect, repeat and highlight in Red\n    if (!curText || !correctText) {\n      return;\n    }\n\n    const normalizedCurrentText = curText.replace(/[^a-zA-Z0-9]/g, '');\n    const normalizedCorrectText = correctText.replace(/[^a-zA-Z0-9]/g, '');\n    if (normalizedCorrectText.toLowerCase() !== normalizedCurrentText.toLowerCase()) {\n      console.log(\"Not matched: \", normalizedCurrentText, normalizedCorrectText)\n      this.setState({ matched: false });\n      return;\n    }\n\n    // if correct, proceed to the next sentences\n    if (curLine === sentences.length) {\n      // stop\n    } else {\n      this.setState({ curLine: nextLine, showHint: false, curText: '', matched: true });\n      speakText(sentences[nextLine]);\n    }\n  }\n\n  onShowHint = () => {\n    this.setState({ showHint: true });\n  }\n\n  componentWillUnmount() {\n    // issue cleanup commands\n  }\n\n  handleTyping = (e) => {\n    this.setState({ curText: e.target.value, matched: true });\n  }\n\n  render() {\n    const { showHint, curLine, sentences, playing, matched } = this.state;\n    return (\n      <form onSubmit={this.onEnter}>\n        <div className=\"form-group\">\n          <label htmlFor=\"typingBox\">Write down what you hear:</label>\n          <ul className=\"list-group voice-typed-list\">\n\n          </ul>\n          <input type=\"text\" name=\"typingBox\" id=\"typingBox\" className={!matched ? \"form-control border-danger\" : \"form-control\"} value={this.state.curText} onChange={this.handleTyping} />\n        </div>\n        <div className=\"form-group\">\n          <button type=\"button\" className=\"btn btn-info mr-3\" onClick={this.onPlay}>\n            <i className={playing ? \"fas fa-pause fa-lg\" : \"fas fa-play fa-lg\"}></i>\n          </button>\n          <button type=\"submit\" className=\"btn btn-info mr-3\">\n            <i className=\"fas fa-forward fa-lg\"></i>\n          </button>\n          <button className=\"btn btn-info\" onClick={this.onShowHint}>Show Hint</button>\n        </div>\n        <div className=\"form-group\">\n          {showHint && <div className=\"alert alert-warning\">{sentences[curLine]}</div>}\n        </div>\n        <CommandBot commands={['ok', 'again']} onCommand={this.onNext} />\n      </form>\n    );\n  }\n}\n\nexport default connect()(VoicePlay);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { signInOrOut } from \"../../event-handlers/auth\";\nimport { Redirect } from 'react-router-dom';\nimport PropTypes from 'prop-types'\n\nclass Login extends React.Component {\n\n  signInOrOut = () => {\n    this.props.dispatch(signInOrOut(\"google\"));\n  };\n\n  render() {\n    const { isAuthenticated } = this.props;\n    const { from } = this.props.location.state || { from: { pathname: '/' } };\n\n    if (isAuthenticated) {\n      return <Redirect to={from} />\n    }\n\n    return (\n      <div className=\"row justify-content-center\">\n        <div className=\"col-6 text-center mt-5 pb-5 pt-5 bg-light shadow\">\n          <div className=\"mb-5\">\n            <i className=\"fas fa-user fa-5x text-info\"></i>\n          </div>\n          <button type=\"button\" className=\"btn btn-danger pl-3 pr-5\" onClick={this.signInOrOut}>\n            <i className=\"fab fa-google mr-5\"></i>\n            Sign In with Google\n          </button>\n        </div>\n      </div>\n    );\n  }\n}\n\nLogin.propTypes = {\n  isAuthenticated: PropTypes.bool,\n  dispatch: PropTypes.func.isRequired\n};\n\nexport default connect(\n  ({ Auth }) => ({\n    isAuthenticated: Auth.isAuthenticated\n  })\n)(Login);","import React from 'react';\nimport { connect } from 'react-redux';\nimport { Route, Redirect } from 'react-router-dom';\nimport PropTypes from 'prop-types';\n\nconst ProtectedRoute = ({ isAuthenticated, component: Component, ...rest }) => {\n  return (\n    <Route {...rest} render={props => (\n      isAuthenticated ?\n        <Component {...props} />\n        : <Redirect to={{\n          pathname: '/login',\n          state: { from: props.location }\n        }} />\n    )} />\n  );\n}\n\nProtectedRoute.propTypes = {\n  isAuthenticated: PropTypes.bool\n};\n\nexport default connect(\n  ({ Auth }) => ({\n    isAuthenticated: Auth.isAuthenticated\n  })\n)(ProtectedRoute);","import \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"@fortawesome/fontawesome-free/css/all.min.css\";\nimport \"./index.css\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport DictationApp from \"./views/dictation\";\nimport thunk from \"redux-thunk\";\nimport logger from \"redux-logger\";\nimport { Provider } from \"react-redux\";\nimport { createStore, applyMiddleware } from \"redux\";\nimport reducers, { initializeStore } from \"./event-handlers\";\nimport { HashRouter as Router, Route } from \"react-router-dom\";\nimport Goal from \"./views/goal\";\nimport DictationView from \"./views/dictation/dictation-view\";\nimport AppHeader from \"./views/shared/app-header\";\nimport Dashboard from \"./views/dashboard\";\nimport Voice from \"./views/voice\";\nimport VoicePlay from \"./views/voice/voice-play\";\nimport Login from \"./views/login\";\nimport ProtectedRoute from \"./views/shared/protected-route\";\n\n/**\n * Initial setup\n */\nconst middlewares = [thunk];\nlet basename = process.env.REACT_APP_BASE_NAME;\n\n/**\n * Development setup\n */\nif (process.env.NODE_ENV === \"development\") {\n  middlewares.push(logger);\n}\n\nif (process.env.NODE_ENV === \"production\") {\n  //TODO: enable security features\n}\n\n/**\n * Initialize the store with pre-loaded information\n */\n\ninitializeStore.then(preloadedState => {\n  const store = createStore(reducers, preloadedState, applyMiddleware(...middlewares));\n\n  ReactDOM.render(\n    <Provider store={store}>\n      <Router basename={basename}>\n        <AppHeader />\n        <main className=\"app-body\">\n          <section className=\"app-view\">\n            <div className=\"container app-container\">\n              <Route exact path=\"/\" component={Dashboard} />\n              <Route exact path=\"/login\" component={Login} />\n              <ProtectedRoute exact path=\"/dictation\" component={DictationApp} />\n              <ProtectedRoute path=\"/dictation/:vid\" component={DictationView} />\n              <ProtectedRoute exact path=\"/goal\" component={Goal} />\n              <ProtectedRoute exact path=\"/voice\" component={Voice} />\n              <ProtectedRoute path=\"/voice/:id\" component={VoicePlay} />\n            </div>\n          </section>\n        </main>\n      </Router>\n    </Provider>,\n    document.getElementById(\"root\")\n  );\n});\n"],"sourceRoot":""}