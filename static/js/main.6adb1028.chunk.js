(this["webpackJsonpsrc-voka-web"]=this["webpackJsonpsrc-voka-web"]||[]).push([[0],{48:function(e,t,a){e.exports=a(87)},51:function(e,t,a){},56:function(e,t,a){},87:function(e,t,a){"use strict";a.r(t);a(49),a(50),a(51);var n=a(0),r=a.n(n),o=a(23),c=a.n(o),i=a(10),l=a(11),s=a(13),u=a(12),d=a(14),m=(a(56),a(6)),p=function(e){var t=e.query,a=e.onClick,o=Object(n.useRef)(null);r.a.useEffect((function(){o&&(o.current.value=t)}),[]);return r.a.createElement("form",{onSubmit:function(e){return e.preventDefault(),void(o.current.value&&a&&a(o.current.value))}},r.a.createElement("div",{className:"form-row mt-3 mb-3"},r.a.createElement("div",{className:"col-8"},r.a.createElement("input",{ref:o,type:"text",name:"queryBox",id:"queryBox",className:"form-control",placeholder:"Search Youtube"})),r.a.createElement("div",{className:"col-4"},r.a.createElement("button",{type:"submit",className:"btn btn-secondary pl-4 pr-4"},r.a.createElement("i",{className:"fas fa-search fa-lg"})))))},f=a(9),v=function(e){var t=e.children;return r.a.createElement("div",{dangerouslySetInnerHTML:{__html:t}})},b=a(41),y=a.n(b),E=function(e){var t=e.videos,a=e.onFiniteScroll;return r.a.useEffect((function(){document.addEventListener("scroll",y.a.debounce((function(){(function(){var e=document.documentElement,t=document.body,a=e.clientHeight,n=window.pageYOffset;return Math.max(t.scrollHeight,e.scrollHeight,t.offsetHeight,e.offsetHeight,t.clientHeight,e.clientHeight)-n-a})()<50&&a()}),100))}),[]),t&&r.a.createElement("ul",{className:"list-group list-group-flush col-md-8 mb-3"},t.map((function(e){return r.a.createElement("li",{className:"list-group-item app-yt-item",key:e.etag},r.a.createElement("div",{className:"video-list media"},r.a.createElement("div",{className:"media-left mr-4"},r.a.createElement(f.b,{to:"/dictation/".concat(e.id.videoId)},r.a.createElement("img",{src:e.snippet.thumbnails.default.url,alt:"",className:"media-object"}))),r.a.createElement("div",{className:"media-body"},r.a.createElement("div",{className:"media-heading"},r.a.createElement(f.b,{to:"/dictation/".concat(e.id.videoId)},r.a.createElement(v,null,e.snippet.title))))))})))},h=a(20),g=a(2),O=a(43),N=a.n(O),k=function(e,t){return e+"?"+Object.keys(t).map((function(e){return e+"="+t[e]})).join("&")};var w="https://www.googleapis.com/youtube/v3/search",I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,a){e.key&&e.q&&e.part&&e.type||a(new Error("Please make sure that the required fields are inserted"));var n=k(w,e);N()(n).then((function(e){return t(e.json())})).catch(a)}))},j=function(e){var t=Math.floor(e),a=t%60,n=Math.floor(t/60);return n<10?"0"+n+":"+("0"+a).slice(-2):n+":"+("0"+a).slice(-2)},A=function(e,t){return e.map((function(e){return Object(g.a)({},e,{current:e.start===t?"current":""})}))},C="AIzaSyCT5YNj0WpEUrt_4K8b3GZ6NoBZTOImXMA",T={search:{query:null,isLoading:!1,hasError:!1,nextPageToken:null,videos:[]},view:{videoId:null,lines:null,markers:null,playAt:null,curStart:null,command:null}},S=function(e){return function(t,a){var n=a().DictationState;n.search.isLoading||(e?(t(_(e)),I({key:C,q:e,part:"snippet",type:"video",relevanceLanguage:"de",maxResults:10}).then((function(e){t(D(e))})).catch((function(e){console.log("Error: ",e)}))):(t(_(n.search.query)),I({key:C,q:n.search.query,part:"snippet",type:"video",relevanceLanguage:"de",maxResults:10,pageToken:n.search.nextPageToken}).then((function(e){t(L(e))})).catch((function(e){console.log("Error: ",e)}))))}},_=function(e){return{type:"search/LOADING_QUERY_DATA",query:e}},D=function(e){return{type:"search/LOADED_QUERY_DATA",payload:e}},L=function(e){return{type:"search/APPEND_QUERY_DATA",payload:e}},P=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentWillUnmount",value:function(){this.props.onCleanup()}},{key:"render",value:function(){var e=this.props,t=e.query,a=e.videos,n=e.handleQuery,o=e.loadMore;return r.a.createElement(r.a.Fragment,null,r.a.createElement(p,{onClick:n,query:t}),r.a.createElement(E,{videos:a,onFiniteScroll:o}))}}]),t}(r.a.Component),x=Object(m.b)((function(e){var t=e.DictationState;return{query:t.search.query,videos:t.search.videos}}),(function(e){return{handleQuery:function(t){return e(S(t))},loadMore:function(){return e(S())},onCleanup:function(){return e({type:"dictation/CLEANUP_DICTATION_SEARCH"})}}}))(P),H=a(44),G=a(45),R=a.n(G),V=a(18),U="goals/TOGGLE_GOAL",W="goals/ADD_GOAL",M="goals/FILTER_GOAL",Y="goals/CLEANUP",q={SHOW_ALL:"SHOW_ALL",SHOW_ACTIVE:"SHOW_ACTIVE",SHOW_DONE:"SHOW_DONE"},F={goals:[],filter:q.SHOW_ALL},Q=0;var B=Object(V.c)({GoalState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case U:return Object(g.a)({},e,{goals:e.goals.map((function(e){return e.id===t.id?Object(g.a)({},e,{done:!e.done}):e}))});case W:return Object(g.a)({},e,{goals:[].concat(Object(h.a)(e.goals),[{id:t.id,done:!1,text:t.text}])});case M:return Object(g.a)({},e,{filter:t.filter});case Y:return F;default:return e}},DictationState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"search/LOADING_QUERY_DATA":return Object(g.a)({},e,{search:Object(g.a)({},e.search,{query:t.query,isLoading:!0})});case"search/LOADED_QUERY_DATA":return Object(g.a)({},e,{search:Object(g.a)({},e.search,{videos:t.payload.items,nextPageToken:t.payload.nextPageToken,isLoading:!1})});case"search/APPEND_QUERY_DATA":return Object(g.a)({},e,{search:Object(g.a)({},e.search,{videos:[].concat(Object(h.a)(e.search.videos),Object(h.a)(t.payload.items)),nextPageToken:t.payload.nextPageToken,isLoading:!1})});case"dictation/DT_LOAD_CAPTION":var a=t.lines.map((function(e){return Object(g.a)({},e,{formattedStart:j(e.start)})}));return a[0].current="current",Object(g.a)({},e,{view:Object(g.a)({},e.view,{videoId:t.videoId,lines:a,markers:t.lines.map((function(e){return e.start}))})});case"dictation/DT_JUMP_TO_LINE":if(!e.view.lines)return;return Object(g.a)({},e,{view:Object(g.a)({},e.view,{curStart:t.start,lines:A(e.view.lines,t.start)})});case"dictation/DT_CHANGE_TO_LINE":if(!e.view.lines)return;return Object(g.a)({},e,{view:Object(g.a)({},e.view,{playAt:t.start+"|"+(new Date).getTime(),curStart:t.start,lines:A(e.view.lines,t.start)})});case"dictation/DT_DISPATCH_COMMAND":return Object(g.a)({},e,{view:Object(g.a)({},e.view,{command:t.command+"|"+(new Date).getTime()})});case"dictation/CLEANUP_DICTATION_VIEW":return Object(g.a)({},e,{view:Object(g.a)({},T.view)});case"dictation/CLEANUP_DICTATION_SEARCH":return Object(g.a)({},e,{search:Object(g.a)({},T.search)});default:return e}}}),J=a(17),K=function(e){var t=e.onClick,a=r.a.useRef(null);return r.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),a&&a.current.value){var n=a.current.value.trim();t&&t(n),a.current.value=""}}},r.a.createElement("div",{className:"form-row mb-3 mt-3"},r.a.createElement("div",{className:"col-8"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Todo Item",ref:a})),r.a.createElement("div",{className:"col-4"},r.a.createElement("button",{type:"submit",className:"btn btn-secondary"},"Add Item"))))},z=function(e){var t=e.text,a=e.done,n=e.onClick,o=a?" list-group-item-success":"";return r.a.createElement("li",{className:"list-group-item d-flex justify-content-between align-items-center"+o,onClick:n},t,r.a.createElement("span",{className:"badge badge-secondary badge-pill"},"New"))},Z=function(e){var t=e.goals,a=e.toggleGoal;return r.a.createElement("ul",{className:"list-group mb-3"},null!=t&&t.map((function(e){return r.a.createElement(z,Object.assign({key:e.id},e,{onClick:function(){return a(e.id)}}))})))},X=function(e){var t=e.FilterType,a=e.filter,n=e.onFilter,o=a===t.SHOW_ALL?"active":"",c=a===t.SHOW_ACTIVE?"active":"",i=a===t.SHOW_DONE?"active":"";return r.a.createElement("div",{className:"btn-group btn-group-toggle"},r.a.createElement("label",{className:"btn btn-outline-info "+o},r.a.createElement("input",{type:"radio",name:"filters",onClick:function(){return n(t.SHOW_ALL)}})," All"),r.a.createElement("label",{className:"btn btn-outline-info "+c},r.a.createElement("input",{type:"radio",name:"filters",onClick:function(){return n(t.SHOW_ACTIVE)}})," Active"),r.a.createElement("label",{className:"btn btn-outline-info "+i},r.a.createElement("input",{type:"radio",name:"filters",onClick:function(){return n(t.SHOW_DONE)}})," Done"))},$=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentWillUnmount",value:function(){this.props.onCleanup()}},{key:"render",value:function(){var e=this.props,t=e.goals,a=e.filter,n=e.addGoal,o=e.toggleGoal,c=e.filterGoal;return r.a.createElement("div",{className:"row justify-content-md-center"},r.a.createElement("div",{className:"col-md-10 col-lg-8"},r.a.createElement(K,{onClick:function(e){return n(e)}}),r.a.createElement(Z,{goals:t,toggleGoal:o}),r.a.createElement(X,{FilterType:q,filter:a,onFilter:c})))}}]),t}(r.a.Component),ee=function(e,t){switch(t){case q.SHOW_ACTIVE:return e.filter((function(e){return!1===e.done}));case q.SHOW_DONE:return e.filter((function(e){return!0===e.done}));default:return e}},te=Object(m.b)((function(e){var t=e.GoalState;return{goals:ee(t.goals,t.filter),filter:t.filter}}),(function(e){return{addGoal:function(t){return e(function(e){return{type:W,id:Q++,done:!1,text:e}}(t))},toggleGoal:function(t){return e(function(e){return{type:U,id:e}}(t))},filterGoal:function(t){return e(function(e){return{type:M,filter:e}}(t))},onCleanup:function(){return e({type:Y})}}}))($),ae=a(46),ne=a.n(ae),re=null,oe=function(){return re||(re=new Promise((function(e,t){"object"!==typeof window.YT||"function"!==typeof window.YT.ready?ne()("https://www.youtube.com/iframe_api").then((function(){window.YT.ready((function(){e(window.YT)}))}),(function(e){t(e)})):window.YT.ready((function(){e(window.YT)}))}))),re},ce=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).YTEvents=["onReady","onStateChange","onPlaybackQualityChange","onPlaybackRateChange","onError"],a.intervalMarker=null,a.findLastMarker=function(e,t,a){for(var n=e.length,r=1;r<n;r++)if(e[r]>t&&e[r]<=a)return{curStart:e[r-1],nextStart:e[r]};return null},a.onPlayerStateChange=function(e){var t=a.props,n=t.onCued,r=t.onBuffering,o=t.onPause,c=t.onPlaying,i=t.onEnd,l=t.pingInterval,s=t.markers,u=t.onSpeechChange,d=window.YT.PlayerState;switch(null!==s&&s.length>0&&(e.data===d.PLAYING?a.intervalMarker=setInterval((function(){var t=e.target.getCurrentTime(),n=a.findLastMarker(s,t,t+l/1e3);null!=n&&u&&u(n.nextStart)}),l):clearInterval(a.intervalMarker)),e.data){case d.CUED:n(e);break;case d.BUFFERING:r(e);break;case d.PAUSED:o(e);break;case d.PLAYING:c(e);break;case d.ENDED:i(e)}},a.getInitialOptions=function(){return{videoId:a.props.video,width:a.props.width,height:a.props.height,playerVars:{autoplay:a.props.autoplay,cc_load_policy:a.props.showCaptions?1:0,controls:a.props.controls?1:0,disablekb:a.props.disableKeyboard?1:0,fs:a.props.allowFullscreen?1:0,hl:a.props.lang,iv_load_policy:a.props.annotations?1:3,start:a.props.startSeconds,end:a.props.endSeconds,modestbranding:a.props.modestBranding?1:0,playsinline:a.props.playsInline?1:0,rel:a.props.showRelatedVideos?1:0,showinfo:a.props.showInfo?1:0},events:{onReady:a.onPlayerReady,onStateChange:a.onPlayerStateChange}}},a.updateProps=function(e){a.player.then((function(t){e.forEach((function(e){var n=a.props[e];switch(e){case"muted":n?t.mute():t.unMute();break;case"suggestedQuality":t.setPlaybackQuality(n);break;case"volume":t.setVolume(100*n);break;case"paused":n&&2!==t.getPlayerState()?t.pauseVideo():n||2!==t.getPlayerState()||t.playVideo();break;case"id":case"className":case"width":case"height":t.getIframe()[e]=n;break;case"video":if(n){var r=a.props,o={videoId:n,startSeconds:r.startSeconds||0,endSeconds:r.endSeconds};r.autoplay?t.loadVideoById(o):t.cueVideoById(o)}else t.stopVideo();break;case"playAt":if(n){var c=parseFloat(n.split("|")[0]);t.seekTo(c)}break;case"command":switch(n.split("|")[0]){case"play":t.playVideo();break;case"pause":t.pauseVideo();break;case"reset":t.seekTo(0),t.playVideo();break;case"stop":t.stopVideo()}}}))}))},a.createPlayer=function(){var e=a.props.volume;a.player=oe().then((function(e){return new Promise((function(t){a.resolvePlayer=t;var n=new e.Player(a.container,a.getInitialOptions());a.playerInstance=n,a.YTEvents.forEach((function(e){n.addEventListener(e,(function(t){var n=a.props[e];n&&n(t)}))}))}))})),"number"===typeof e&&a.updateProps(["volume"])},a.onPlayerReady=function(e){var t=a.props,n=t.volume,r=t.muted,o=t.suggestedQuality,c=t.playbackRate;"undefined"!==typeof n&&e.target.setVolume(100*n),"undefined"!==typeof r&&(r?e.target.mute():e.target.unMute()),"undefined"!==typeof o&&e.target.setPlaybackQuality(o),"undefined"!==typeof c&&e.target.setPlaybackRate(c),a.resolvePlayer(e.target)},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.createPlayer()}},{key:"componentDidUpdate",value:function(e){var t=this,a=Object.keys(this.props).filter((function(a){return t.props[a]!==e[a]}));this.updateProps(a)}},{key:"componentWillUnmount",value:function(){this.playerInstance&&this.playerInstance.destroy()}},{key:"render",value:function(){var e=this,t=this.props,a=t.id,n=t.className;return r.a.createElement("div",{id:a,className:n,ref:function(t){return e.container=t}})}}]),t}(r.a.Component);ce.defaultProps={autoplay:!1,showCaptions:!1,controls:!0,disableKeyboard:!1,allowFullscreen:!0,annotations:!0,modestBranding:!1,playsInline:!1,showRelatedVideos:!0,showInfo:!0,pingInterval:100,playAt:null,onCued:function(){},onBuffering:function(){},onPlaying:function(){},onPause:function(){},onEnd:function(){},onSpeechChange:null,markers:null,command:null};var ie=ce,le=a(21),se=a.n(le),ue=function(e){var t=e.onCommand,a=["repeat","again","next","reset","stop","play","pause"];return r.a.useEffect((function(){if(se.a){var e={};return a.forEach((function(a){return e[a]=function(){return t(a)}})),se.a.addCommands(e),se.a.start(),function(){se.a.abort()}}})),""},de=Object(m.b)((function(e,t){var a=e.DictationState;return{videoId:t.videoId,markers:a.view.markers,playAt:a.view.playAt,command:a.view.command}}),(function(e){return{jump:function(t){return e(function(e){return{type:"dictation/DT_JUMP_TO_LINE",start:e}}(t))},onCommand:function(t){return e({type:"dictation/DT_DISPATCH_COMMAND",command:t})}}}))((function(e){var t=e.videoId,a=e.markers,n=e.playAt,o=e.jump,c=e.command,i=e.onCommand;return r.a.createElement(r.a.Fragment,null,a&&r.a.createElement(ie,{video:t,markers:a,onSpeechChange:function(e){return o(e)},playAt:n,command:c,width:"720",height:"405",autoplay:"1"}),r.a.createElement(ue,{onCommand:function(e){return i(e)}}))})),me=a(47),pe=a.n(me),fe=function(e){var t=e.lines,a=e.curStart,n=e.onLineClick;return r.a.useEffect((function(){var e=document.querySelector(".caption-viewer .current");null!=e&&e.scrollIntoView({behavior:"smooth",block:"center"})}),[a]),t&&r.a.createElement("ul",{className:"list-group list-group-flush caption-viewer mt-3"},t.map((function(e){return r.a.createElement("li",{className:"list-group-item caption-item "+e.current,key:e.start,"data-start":e.start,onClick:function(e){return n(e.currentTarget.dataset.start)}},r.a.createElement("span",{className:"caption-item-time"},e.formattedStart),r.a.createElement("span",{className:"caption-item-text"},e.text))})))},ve=Object(m.b)((function(e,t){var a=e.DictationState;return{lines:a.view.lines,curStart:a.view.curStart,videoId:t.videoId}}),(function(e){return{onLineClick:function(t){return e(function(e){return{type:"dictation/DT_CHANGE_TO_LINE",start:e}}(t))},onLoaded:function(t,a){return e({type:"dictation/DT_LOAD_CAPTION",videoId:(n={videoId:t,lines:a}).videoId,lines:n.lines});var n}}}))((function(e){var t=e.videoId,a=e.lines,o=e.curStart,c=e.onLineClick,i=e.onLoaded;return Object(n.useEffect)((function(){pe()("https://voka.azurewebsites.net/api/v1/captions/".concat(t,"/de")).then((function(e){return i(t,e.data)}))}),[]),r.a.createElement(fe,{lines:a,curStart:o,onLineClick:c})})),be=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentWillUnmount",value:function(){this.props.dispatch({type:"dictation/CLEANUP_DICTATION_VIEW"})}},{key:"render",value:function(){var e=this.props.match.params.vid;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 text-center"},r.a.createElement(de,{videoId:e}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement(ve,{videoId:e}))))}}]),t}(r.a.Component),ye=Object(m.b)()(be),Ee=(a(85),function(e){var t=e.to,a=e.title,n=e.text,o=e.icon;return r.a.createElement("div",{className:"card shadow border-info py-2 dashboard-card mb-3"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"row align-items-center no-gutters"},r.a.createElement("div",{className:"col mr-2"},r.a.createElement(f.b,{className:"font-weight-bold",to:t},a),r.a.createElement("div",null,n)),r.a.createElement("div",{className:"col-auto"},r.a.createElement("i",{className:o})))))}),he=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement(Ee,{to:"/dictation",title:"VIDEO DICTATION",text:"Learning by watching Youtube in Deutsch and repeating along.",icon:"fas fa-chalkboard-teacher fa-5x"})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement(Ee,{to:"/goal",title:"GOAL SETTING",text:"Setting goals and keep track of progress.",icon:"fas fa-tasks fa-5x"})))}}]),t}(r.a.Component),ge=Object(V.d)(B,Object(V.a)(H.a,R.a));c.a.render(r.a.createElement(m.a,{store:ge},r.a.createElement(f.a,null,r.a.createElement((function(e){return r.a.createElement("nav",{className:"navbar navbar-dark bg-info navbar-expand-lg fixed-top portfolio-navbar gradient"},r.a.createElement("div",{className:"container app-container"},r.a.createElement(f.b,{to:"/",className:"navbar-brand logo"},"Deutsch Lernen"),r.a.createElement("button",{className:"navbar-toggler","data-target":"#navbarNav","data-toggle":"collapse"},r.a.createElement("span",{className:"sr-only"},"Toggle navigation"),r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{id:"navbarNav",className:"collapse navbar-collapse"},r.a.createElement("ul",{className:"nav navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item",role:"presentation"},r.a.createElement(f.b,{to:"/",className:"nav-link active"},"Dashboard")),r.a.createElement("li",{className:"nav-item",role:"presentation"},r.a.createElement(f.b,{to:"/signin",className:"nav-link active"},"Sign In"))))))}),null),r.a.createElement("main",{className:"app-body"},r.a.createElement("section",{className:"app-view"},r.a.createElement("div",{className:"container app-container"},r.a.createElement(J.a,{exact:!0,path:"/",component:he}),r.a.createElement(J.a,{exact:!0,path:"/dictation",component:x}),r.a.createElement(J.a,{path:"/dictation/:vid",component:ye}),r.a.createElement(J.a,{path:"/goal",component:te})))))),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.6adb1028.chunk.js.map